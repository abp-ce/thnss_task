# thnss_task
#
## Тестовое задание.
```
Напишите простого бота, который будет иметь одну кнопку: загрузить файл
1. При нажатии кнопки пользователь прикрепляет файл excel в формате таблицы с
полями:
a. title - название
b. url - ссылка на сайт источник
c. xpath - путь к элементу с ценой
2. Бот получает файл, сохраняет
3. Открывает файл библиотекой pandas
4. Выводит содержимое в ответ пользователю
5. Сохраняет содержимое в локальную БД sqlite

*Задача со звездочкой:
Провести парсинг по данным из таблицы и вывести среднюю цену зюзюблика по каждому
сайту
```
### Имя бота в Telegram - @abpTechnesisBot
### Особенности реализации.

Считается только для ozon по всем title в присланном файле, выводится сообщением бота по окончании парсинга. Данные предыдущего файла в базе для пользователя удаляются при обработке текущего файла.

## Клонировать репозиторий
```
git clone https://github.com/abp-ce/thnss_task.git
cd thnss_task
```

## Запустить проект:

### Вариант I
```
docker compose up -d
```

### Вариант II

Установить зависимости poetry (https://python-poetry.org/docs/):

```
poetry install
```
<small>Версия python в проекте ">=3.10"</small>

Установить браузер для playwright:
```
poetry run playwright install chromium
```
<small>Возможно понадобятся зависимости для браузера.</small>


Запустить проект:

```
poetry run python src/technesis/main.py
```

или
```
poetry run python -m src.technesis.main
```


Запустить тесты:

```
poetry run python -m pytest -v
```